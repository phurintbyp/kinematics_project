<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot Arm Control Pendant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Left Side Panels -->
        <div class="left-panels">
            <!-- Top Left Panel: Title and Status -->
            <div class="left-panel" style="display: flex; flex-direction: column;">
                <h1>RRPRRR Robot Arm Control</h1>
                <div class="status-indicator">
                    <span id="connection-status" class="status-dot disconnected"></span>
                    <span id="status-text">Disconnected</span>
                </div>
            </div>
            
            <!-- Emergency Stop Panel -->
            <div class="left-panel" style="display: flex; justify-content: center; align-items: center;">
                <button id="emergency-stop" class="emergency-stop-btn" style="width: 100%;">
                    <i class="fas fa-exclamation-triangle"></i> EMERGENCY STOP
                </button>
            </div>

            <!-- Position Display Panel -->
            <div class="left-panel">
                <div class="position-card">
                    <h3>End Effector Position</h3>
                    <div class="position-values">
                        <div class="position-value">
                            <span>X:</span>
                            <span id="ee-x">0.00</span> mm
                        </div>
                        <div class="position-value">
                            <span>Y:</span>
                            <span id="ee-y">0.00</span> mm
                        </div>
                        <div class="position-value">
                            <span>Z:</span>
                            <span id="ee-z">0.00</span> mm
                        </div>
                        <div class="position-value">
                            <span>Roll:</span>
                            <span id="ee-roll">0.00</span>°
                        </div>
                        <div class="position-value">
                            <span>Pitch:</span>
                            <span id="ee-pitch">0.00</span>°
                        </div>
                        <div class="position-value">
                            <span>Yaw:</span>
                            <span id="ee-yaw">0.00</span>°
                        </div>
                    </div>
                </div>

                <div class="position-card">
                    <h3>Joint Positions</h3>
                    <div class="position-values">
                        <div class="position-value">
                            <span>Base Rotation:</span>
                            <span id="joint-base-rotation">0.00</span>°
                        </div>
                        <div class="position-value">
                            <span>Shoulder Rotation:</span>
                            <span id="joint-shoulder-rotation">0.00</span>°
                        </div>
                        <div class="position-value">
                            <span>Prismatic Extension:</span>
                            <span id="joint-prismatic-extension">0.00</span> mm
                        </div>
                        <div class="position-value">
                            <span>Elbow Rotation:</span>
                            <span id="joint-elbow-rotation">0.00</span>°
                        </div>
                        <div class="position-value">
                            <span>Wrist Rotation:</span>
                            <span id="joint-wrist-rotation">0.00</span>°
                        </div>
                        <div class="position-value">
                            <span>End Effector Rotation:</span>
                            <span id="joint-end-effector-rotation">0.00</span>°
                        </div>
                    </div>
                </div>
                
                <!-- Visualization Section -->
                <div class="visualization">
                    <h3>Robot Visualization</h3>
                    <div id="robot-visualization">
                        <p class="visualization-placeholder">3D visualization will be displayed here</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Area (Right Side) -->
        <div class="main-content">
            <!-- Tab Navigation -->
            <div class="tab-buttons">
                <button class="tab-button active" data-tab="jogging">Jogging</button>
                <button class="tab-button" data-tab="program">Program</button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Jogging Tab -->
                <div id="jogging" class="tab-panel active">
                    <h2>Jogging Control</h2>
                    <p>Incrementally jog individual joints for fine adjustments.</p>
                    
                    <div class="jog-controls">
                        <div class="jog-control">
                            <span>Base Rotation:</span>
                            <div class="jog-buttons">
                                <button class="jog-btn" data-joint="base_rotation" data-increment="-10">-10°</button>
                                <button class="jog-btn" data-joint="base_rotation" data-increment="-1">-1°</button>
                                <button class="jog-btn" data-joint="base_rotation" data-increment="-0.1">-0.1°</button>
                                <button class="jog-btn" data-joint="base_rotation" data-increment="0.1">+0.1°</button>
                                <button class="jog-btn" data-joint="base_rotation" data-increment="1">+1°</button>
                                <button class="jog-btn" data-joint="base_rotation" data-increment="10">+10°</button>
                            </div>
                        </div>
                        
                        <div class="jog-control">
                            <span>Shoulder Rotation:</span>
                            <div class="jog-buttons">
                                <button class="jog-btn" data-joint="shoulder_rotation" data-increment="-10">-10°</button>
                                <button class="jog-btn" data-joint="shoulder_rotation" data-increment="-1">-1°</button>
                                <button class="jog-btn" data-joint="shoulder_rotation" data-increment="-0.1">-0.1°</button>
                                <button class="jog-btn" data-joint="shoulder_rotation" data-increment="0.1">+0.1°</button>
                                <button class="jog-btn" data-joint="shoulder_rotation" data-increment="1">+1°</button>
                                <button class="jog-btn" data-joint="shoulder_rotation" data-increment="10">+10°</button>
                            </div>
                        </div>
                        
                        <div class="jog-control">
                            <span>Prismatic Extension:</span>
                            <div class="jog-buttons">
                                <button class="jog-btn" data-joint="prismatic_extension" data-increment="-10">-10mm</button>
                                <button class="jog-btn" data-joint="prismatic_extension" data-increment="-1">-1mm</button>
                                <button class="jog-btn" data-joint="prismatic_extension" data-increment="-0.1">-0.1mm</button>
                                <button class="jog-btn" data-joint="prismatic_extension" data-increment="0.1">+0.1mm</button>
                                <button class="jog-btn" data-joint="prismatic_extension" data-increment="1">+1mm</button>
                                <button class="jog-btn" data-joint="prismatic_extension" data-increment="10">+10mm</button>
                            </div>
                        </div>
                        
                        <div class="jog-control">
                            <span>Elbow Rotation:</span>
                            <div class="jog-buttons">
                                <button class="jog-btn" data-joint="elbow_rotation" data-increment="-10">-10°</button>
                                <button class="jog-btn" data-joint="elbow_rotation" data-increment="-1">-1°</button>
                                <button class="jog-btn" data-joint="elbow_rotation" data-increment="-0.1">-0.1°</button>
                                <button class="jog-btn" data-joint="elbow_rotation" data-increment="0.1">+0.1°</button>
                                <button class="jog-btn" data-joint="elbow_rotation" data-increment="1">+1°</button>
                                <button class="jog-btn" data-joint="elbow_rotation" data-increment="10">+10°</button>
                            </div>
                        </div>
                        
                        <div class="jog-control">
                            <span>Wrist Rotation:</span>
                            <div class="jog-buttons">
                                <button class="jog-btn" data-joint="wrist_rotation" data-increment="-10">-10°</button>
                                <button class="jog-btn" data-joint="wrist_rotation" data-increment="-1">-1°</button>
                                <button class="jog-btn" data-joint="wrist_rotation" data-increment="-0.1">-0.1°</button>
                                <button class="jog-btn" data-joint="wrist_rotation" data-increment="0.1">+0.1°</button>
                                <button class="jog-btn" data-joint="wrist_rotation" data-increment="1">+1°</button>
                                <button class="jog-btn" data-joint="wrist_rotation" data-increment="10">+10°</button>
                            </div>
                        </div>
                        
                        <div class="jog-control">
                            <span>End Effector Rotation:</span>
                            <div class="jog-buttons">
                                <button class="jog-btn" data-joint="end_effector_rotation" data-increment="-10">-10°</button>
                                <button class="jog-btn" data-joint="end_effector_rotation" data-increment="-1">-1°</button>
                                <button class="jog-btn" data-joint="end_effector_rotation" data-increment="-0.1">-0.1°</button>
                                <button class="jog-btn" data-joint="end_effector_rotation" data-increment="0.1">+0.1°</button>
                                <button class="jog-btn" data-joint="end_effector_rotation" data-increment="1">+1°</button>
                                <button class="jog-btn" data-joint="end_effector_rotation" data-increment="10">+10°</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-buttons">
                        <button id="save-position" class="save-btn">Save Current Position</button>
                    </div>
                </div>
                
                <!-- Program Tab -->
                <div id="program" class="tab-panel">
                    <h2>Program Mode</h2>
                    <p>Create a sequence of movements by saving positions and arranging them in order.</p>
                    
                    <div class="program-container">
                        <div class="saved-positions">
                            <h3>Saved Positions</h3>
                            <div id="positions-list" class="positions-list">
                                <!-- Saved positions will be added here dynamically -->
                                <div class="empty-state">
                                    <p>No positions saved yet. Use the Jogging tab to move the robot and save positions.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="program-sequence">
                            <h3>Program Sequence</h3>
                            <div id="sequence-list" class="sequence-list">
                                <!-- Program sequence will be built here -->
                                <div class="empty-state">
                                    <p>No sequence created yet. Add saved positions to create a program.</p>
                                </div>
                            </div>
                            
                            <div class="sequence-controls">
                                <div class="sequence-settings">
                                    <div class="setting-group">
                                        <label for="movement-speed">Movement Speed:</label>
                                        <select id="movement-speed">
                                            <option value="slow">Slow</option>
                                            <option value="medium" selected>Medium</option>
                                            <option value="fast">Fast</option>
                                        </select>
                                    </div>
                                    
                                    <div class="setting-group">
                                        <label for="repeat-count">Repeat Count:</label>
                                        <input type="number" id="repeat-count" min="1" value="1">
                                    </div>
                                </div>
                                
                                <div class="program-buttons">
                                    <button id="run-program" class="execute-btn">Run Program</button>
                                    <button id="stop-program" class="reset-btn" disabled>Stop Program</button>
                                    <button id="save-program" class="save-btn">Save Program</button>
                                    <button id="load-program" class="load-btn">Load Program</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
