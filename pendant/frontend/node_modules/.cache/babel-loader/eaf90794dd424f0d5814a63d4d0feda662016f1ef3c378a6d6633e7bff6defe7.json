{"ast":null,"code":"var _jsxFileName = \"/Users/phacharakimpha/kinematics_project/pendant/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport JogControl from './components/JogControl';\nimport PositionDisplay from './components/PositionDisplay';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [jointPositions, setJointPositions] = useState({\n    base_rotation: 0,\n    shoulder_rotation: 0,\n    prismatic_extension: 0,\n    elbow_rotation: 0,\n    wrist_rotation: 0,\n    end_effector_rotation: 0\n  });\n  const [eePosition, setEePosition] = useState({\n    x: 0,\n    y: 0,\n    z: 0,\n    roll: 0,\n    pitch: 0,\n    yaw: 0\n  });\n  const [websocket, setWebsocket] = useState(null);\n  const [connected, setConnected] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Initialize WebSocket connection\n  useEffect(() => {\n    const ws = new WebSocket(`ws://${window.location.hostname}:8000/ws`);\n    ws.onopen = () => {\n      console.log('WebSocket connected');\n      setConnected(true);\n      setError(null);\n    };\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'position_update') {\n        setJointPositions(data.joint_positions);\n        setEePosition(data.ee_position);\n      }\n    };\n    ws.onerror = error => {\n      console.error('WebSocket error:', error);\n      setError('Failed to connect to the robot control server');\n      setConnected(false);\n    };\n    ws.onclose = () => {\n      console.log('WebSocket disconnected');\n      setConnected(false);\n    };\n    setWebsocket(ws);\n\n    // Clean up the WebSocket connection when the component unmounts\n    return () => {\n      if (ws) {\n        ws.close();\n      }\n    };\n  }, []);\n\n  // Fetch initial positions from the API\n  useEffect(() => {\n    const fetchPositions = async () => {\n      try {\n        const [jointRes, eeRes] = await Promise.all([axios.get('/api/joint_positions'), axios.get('/api/ee_position')]);\n        setJointPositions(jointRes.data);\n        setEePosition(eeRes.data);\n      } catch (error) {\n        console.error('Error fetching positions:', error);\n        setError('Failed to fetch robot positions');\n      }\n    };\n    fetchPositions();\n  }, []);\n\n  // Handle emergency stop\n  const handleEmergencyStop = async () => {\n    try {\n      await axios.post('/api/emergency_stop');\n      console.log('Emergency stop activated');\n    } catch (error) {\n      console.error('Error activating emergency stop:', error);\n      setError('Failed to activate emergency stop');\n    }\n  };\n\n  // Send a message through the WebSocket\n  const sendWebSocketMessage = useCallback(message => {\n    if (websocket && websocket.readyState === WebSocket.OPEN) {\n      websocket.send(JSON.stringify(message));\n    } else {\n      console.error('WebSocket is not connected');\n      setError('WebSocket is not connected');\n    }\n  }, [websocket]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Robot Arm Control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"connection-status\",\n        children: [\"Status: \", connected ? 'Connected' : 'Disconnected']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"emergency-stop-button\",\n        onClick: handleEmergencyStop,\n        children: \"EMERGENCY STOP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-panel\",\n        children: /*#__PURE__*/_jsxDEV(PositionDisplay, {\n          jointPositions: jointPositions,\n          eePosition: eePosition\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-panel\",\n        children: /*#__PURE__*/_jsxDEV(JogControl, {\n          sendWebSocketMessage: sendWebSocketMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"eo+3WPVipu9koWI0dGelvltw/dg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","JogControl","PositionDisplay","jsxDEV","_jsxDEV","App","_s","jointPositions","setJointPositions","base_rotation","shoulder_rotation","prismatic_extension","elbow_rotation","wrist_rotation","end_effector_rotation","eePosition","setEePosition","x","y","z","roll","pitch","yaw","websocket","setWebsocket","connected","setConnected","error","setError","ws","WebSocket","window","location","hostname","onopen","console","log","onmessage","event","data","JSON","parse","type","joint_positions","ee_position","onerror","onclose","close","fetchPositions","jointRes","eeRes","Promise","all","get","handleEmergencyStop","post","sendWebSocketMessage","message","readyState","OPEN","send","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/phacharakimpha/kinematics_project/pendant/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport JogControl from './components/JogControl';\nimport PositionDisplay from './components/PositionDisplay';\nimport './App.css';\n\nconst App = () => {\n  const [jointPositions, setJointPositions] = useState({\n    base_rotation: 0,\n    shoulder_rotation: 0,\n    prismatic_extension: 0,\n    elbow_rotation: 0,\n    wrist_rotation: 0,\n    end_effector_rotation: 0\n  });\n  \n  const [eePosition, setEePosition] = useState({\n    x: 0,\n    y: 0,\n    z: 0,\n    roll: 0,\n    pitch: 0,\n    yaw: 0\n  });\n  \n  const [websocket, setWebsocket] = useState(null);\n  const [connected, setConnected] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Initialize WebSocket connection\n  useEffect(() => {\n    const ws = new WebSocket(`ws://${window.location.hostname}:8000/ws`);\n    \n    ws.onopen = () => {\n      console.log('WebSocket connected');\n      setConnected(true);\n      setError(null);\n    };\n    \n    ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'position_update') {\n        setJointPositions(data.joint_positions);\n        setEePosition(data.ee_position);\n      }\n    };\n    \n    ws.onerror = (error) => {\n      console.error('WebSocket error:', error);\n      setError('Failed to connect to the robot control server');\n      setConnected(false);\n    };\n    \n    ws.onclose = () => {\n      console.log('WebSocket disconnected');\n      setConnected(false);\n    };\n    \n    setWebsocket(ws);\n    \n    // Clean up the WebSocket connection when the component unmounts\n    return () => {\n      if (ws) {\n        ws.close();\n      }\n    };\n  }, []);\n\n  // Fetch initial positions from the API\n  useEffect(() => {\n    const fetchPositions = async () => {\n      try {\n        const [jointRes, eeRes] = await Promise.all([\n          axios.get('/api/joint_positions'),\n          axios.get('/api/ee_position')\n        ]);\n        \n        setJointPositions(jointRes.data);\n        setEePosition(eeRes.data);\n      } catch (error) {\n        console.error('Error fetching positions:', error);\n        setError('Failed to fetch robot positions');\n      }\n    };\n    \n    fetchPositions();\n  }, []);\n\n  // Handle emergency stop\n  const handleEmergencyStop = async () => {\n    try {\n      await axios.post('/api/emergency_stop');\n      console.log('Emergency stop activated');\n    } catch (error) {\n      console.error('Error activating emergency stop:', error);\n      setError('Failed to activate emergency stop');\n    }\n  };\n\n  // Send a message through the WebSocket\n  const sendWebSocketMessage = useCallback((message) => {\n    if (websocket && websocket.readyState === WebSocket.OPEN) {\n      websocket.send(JSON.stringify(message));\n    } else {\n      console.error('WebSocket is not connected');\n      setError('WebSocket is not connected');\n    }\n  }, [websocket]);\n\n  return (\n    <div className=\"app\">\n      <header className=\"app-header\">\n        <h1>Robot Arm Control</h1>\n        {error && <div className=\"error-message\">{error}</div>}\n        <div className=\"connection-status\">\n          Status: {connected ? 'Connected' : 'Disconnected'}\n        </div>\n        <button \n          className=\"emergency-stop-button\" \n          onClick={handleEmergencyStop}\n        >\n          EMERGENCY STOP\n        </button>\n      </header>\n      \n      <div className=\"app-content\">\n        <div className=\"left-panel\">\n          <PositionDisplay \n            jointPositions={jointPositions} \n            eePosition={eePosition} \n          />\n        </div>\n        \n        <div className=\"right-panel\">\n          <JogControl \n            sendWebSocketMessage={sendWebSocketMessage}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}